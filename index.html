<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aurélien Lannoye – Portfolio Platformer</title>
  <style>
    :root{--bg:#0e0f12;--panel:#14161a;--text:#e9e9f0;--muted:#9aa0a6;--accent:#ffb703;--accent2:#90e0ef;--safe:#9b5de5}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0d0e11,#0a0b0e);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    header{position:sticky;top:0;z-index:50;background:rgba(10,11,14,.6);backdrop-filter:blur(8px);border-bottom:1px solid #1f232a}
    .bar{max-width:1100px;margin:auto;padding:10px 16px;display:flex;gap:12px;align-items:center}
    .bar b{color:var(--safe)}
    .bar .sp{margin-left:auto;display:flex;align-items:center;gap:10px}
    .toggle{display:inline-flex;gap:6px;border:1px solid #2a2f38;border-radius:12px;overflow:hidden}
    .toggle button{background:#0f1115;color:#cfd3dc;border:0;padding:8px 10px;cursor:pointer}
    .toggle button.active{background:#1a1f28;color:#fff}

    main{max-width:1100px;margin:16px auto;padding:0 16px;display:grid;grid-template-columns:1fr 360px;gap:16px}
    @media (max-width: 980px){main{grid-template-columns:1fr}}

    .card{background:var(--panel);border:1px solid #232834;border-radius:16px;overflow:hidden}
    .cardHead{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #1f232a}
    #game{display:block;width:100%;height:auto;background:#0b0c10}

    .side{background:var(--panel);border:1px solid #232834;border-radius:16px;padding:16px}
    .side h2{margin:6px 0 10px;color:#ffd166;font-size:18px}
    .side p{color:var(--muted)}
    .lst{list-style:none;margin:10px 0 0;padding:0;display:grid;gap:8px}
    .lst a{display:block;padding:10px 12px;border:1px solid #2b3140;background:#0f1116;color:#e9e9f0;border-radius:10px;text-decoration:none}
    .lst a:hover{border-color:#3a4254}
    footer{opacity:.7;max-width:1100px;margin:18px auto 40px;padding:0 16px}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div>Portfolio <b>Platformer</b> — léger, 100% Canvas</div>
      <div class="sp">
        <div class="toggle" id="modeT">
          <button data-mode="game" class="active">Game mode</button>
          <button data-mode="mouse">Mouse mode</button>
        </div>
        <small style="opacity:.7">← → pour bouger • Espace pour sauter • E pour ouvrir</small>
      </div>
    </div>
  </header>

  <main>
    <section class="card">
      <div class="cardHead"><b>Écran d'accueil jouable</b><span id="info"></span></div>
      <canvas id="game" width="960" height="540"></canvas>
    </section>

    <aside class="side">
      <h2>À propos</h2>
      <p>Mini platformer pour ouvrir les sections du portfolio. Style original (pas de reprise d'assets Nintendo) et taille ultra‑légère pour GitHub Pages.</p>
      <h2>Sections</h2>
      <ul class="lst" id="quick"></ul>
    </aside>
  </main>

  <footer>© 2025 Aurélien Lannoye — Demo Canvas. Les gros builds Unity/UE5 restent sur itch.io/Steam.</footer>

  <script>
  // ====== Données sections (id, label, url) ======
  const SECTIONS = [
    { id:'skills', label:'Atouts', url:'#skills' },
    { id:'projects', label:'Projets', url:'https://github.com/CryptoGot?tab=repositories' },
    { id:'contact', label:'Contact', url:'mailto:a.lannoye@students.ephec.be' },
    { id:'studies', label:'Études', url:'#studies' },
  ];
  document.getElementById('quick').innerHTML = SECTIONS.map(s=>`<li><a href="${s.url}" target="_blank">${s.label}</a></li>`).join('');

  // ====== Canvas setup ======
  const cvs = document.getElementById('game');
  const ctx = cvs.getContext('2d');
  const info = document.getElementById('info');
  let mode = 'game'; // 'game' ou 'mouse'
  document.getElementById('modeT').addEventListener('click', (e)=>{
    if(e.target.tagName!=="BUTTON") return;
    mode = e.target.dataset.mode;
    [...e.currentTarget.children].forEach(b=>b.classList.toggle('active', b.dataset.mode===mode));
  });

  // ====== Monde ======
  const G = 0.6; // gravité
  const TILE = 48;
  const world = { w: 64*TILE, h: 18*TILE };

  // plates-formes (x,y,w,h)
  const platforms = [
    {x:0,y:world.h-48,w:world.w,h:48}, // sol
    {x:4*TILE,y:12*TILE,w:6*TILE,h:TILE/2},
    {x:14*TILE,y:10*TILE,w:6*TILE,h:TILE/2},
    {x:24*TILE,y:8*TILE,w:6*TILE,h:TILE/2},
    {x:34*TILE,y:6*TILE,w:6*TILE,h:TILE/2},
    {x:44*TILE,y:9*TILE,w:7*TILE,h:TILE/2},
  ];

  // trous (si tu tombes dedans -> respawn) : rects vides dans le sol
  const holes = [ {x: 20*TILE, w: 3*TILE}, {x: 52*TILE, w: 3*TILE} ];

  // blocs interactifs "?" -> ouvrent des liens
  const blocks = SECTIONS.map((s,i)=>({
    id:s.id,label:s.label,url:s.url,
    x: (6 + i*10)*TILE, y: (5 + (i%2)*-2)*TILE, size:TILE
  }));

  // ====== Joueur (sprite procédural animé) ======
  const player = { x:2*TILE, y:10*TILE, w:28, h:36, vx:0, vy:0, onGround:false, dir:1, animTime:0 };

  // ====== Caméra ======
  const cam = { x:0, y:0, w:cvs.width, h:cvs.height };

  // ====== Input ======
  const keys=new Set();
  addEventListener('keydown',e=>{ keys.add(e.key.toLowerCase()); });
  addEventListener('keyup',e=>{ keys.delete(e.key.toLowerCase()); });

  // ====== Helpers ======
  function rects(a,b){ return a.x < b.x+b.w && a.x+a.w > b.x && a.y < b.y+b.h && a.y+a.h > b.y; }

  function update(){
    if(mode==='game'){
      const left = keys.has('arrowleft')||keys.has('q');
      const right= keys.has('arrowright')||keys.has('d');
      const jump = keys.has(' ')||keys.has('space')||keys.has('arrowup')||keys.has('z');

      // move horizontal
      const speed = 3.2;
      player.vx = (right?speed:0) - (left?speed:0);
      if(player.vx!==0) player.dir = Math.sign(player.vx);

      // gravity
      player.vy += G; if(player.vy>16) player.vy=16;

      // jump
      if(jump && player.onGround){ player.vy = -10.5; player.onGround=false; }

      // apply X then collide
      player.x += player.vx;
      for(const p of platforms){
        if(rects(player,{x:p.x,y:p.y,w:p.w,h:p.h})){
          if(player.vx>0) player.x = p.x - player.w; else if(player.vx<0) player.x = p.x+p.w;
        }
      }

      // apply Y then collide
      player.y += player.vy; player.onGround=false;
      for(const p of platforms){
        if(rects(player,{x:p.x,y:p.y,w:p.w,h:p.h})){
          if(player.vy>0){ player.y = p.y - player.h; player.vy=0; player.onGround=true; }
          else if(player.vy<0){ player.y = p.y + p.h; player.vy=0; }
        }
      }

      // holes -> si le bas du joueur est sous le plancher ET x dans un trou
      const pxCenter = player.x + player.w/2;
      const inHole = holes.some(h=> pxCenter>h.x && pxCenter<h.x+h.w && player.y+player.h>=world.h-48 );
      if(inHole){ player.y += 12; }
      if(player.y > world.h + 200){ respawn(); }

      // interaction: si la tête percute un bloc on ouvre le lien
      if(player.vy<0){
        for(const b of blocks){
          const br = {x:b.x, y:b.y, w:b.size, h:b.size};
          if(rects(player,br)){
            player.vy = 2; // renvoyer vers le bas
            window.open(b.url,'_blank');
          }
        }
      }

      // camera follow
      cam.x = Math.max(0, Math.min(world.w-cam.w, Math.floor(player.x - cam.w/2 + player.w/2)));
      cam.y = Math.max(0, Math.min(world.h-cam.h, Math.floor(player.y - cam.h/2 + player.h/2)));

      player.animTime += Math.abs(player.vx)*0.02 + (player.onGround?0:0.05);
    }

    draw();
    requestAnimationFrame(update);
  }

  function respawn(){
    player.x = 2*TILE; player.y = 10*TILE; player.vx=0; player.vy=0; cam.x=0; cam.y=0;
    info.textContent = 'Respawn'; setTimeout(()=> info.textContent='', 800);
  }

  function draw(){
    // bg
    ctx.fillStyle = '#0b0c10'; ctx.fillRect(0,0,cvs.width,cvs.height);

    ctx.save(); ctx.translate(-cam.x, -cam.y);

    // sky gradient
    const g = ctx.createLinearGradient(0,0,0,world.h);
    g.addColorStop(0,'#111525'); g.addColorStop(1,'#0b0c10');
    ctx.fillStyle=g; ctx.fillRect(0,0,world.w,world.h);

    // ground slabs + holes
    ctx.fillStyle = '#1a2030';
    for(const p of platforms){ ctx.fillRect(p.x,p.y,p.w,p.h); }
    ctx.fillStyle = '#0b0c10';
    for(const h of holes){ ctx.fillRect(h.x,world.h-48,h.w,48); }

    // blocks ("?") style original
    ctx.textAlign='center'; ctx.textBaseline='middle'; ctx.font='bold 20px system-ui,Segoe UI';
    for(const b of blocks){
      ctx.fillStyle = '#2a2f43'; ctx.fillRect(b.x,b.y,b.size,b.size);
      ctx.strokeStyle = '#525a78'; ctx.lineWidth=2; ctx.strokeRect(b.x+2,b.y+2,b.size-4,b.size-4);
      ctx.fillStyle = '#ffd166'; ctx.fillText('?', b.x+b.size/2, b.y+b.size/2+1);
      // label sous le bloc
      ctx.fillStyle = '#cfd3dc'; ctx.font='12px system-ui';
      ctx.fillText(b.label, b.x+b.size/2, b.y+b.size+12);
    }

    // player (sprite procédural animé: tête + corps + jambes qui marchent)
    const t = player.animTime;
    const leg = Math.sin(t*8)*5; // oscillation jambes
    const px = player.x, py = player.y;

    // ombre
    ctx.fillStyle='rgba(0,0,0,.35)'; ctx.beginPath(); ctx.ellipse(px+player.w/2, py+player.h, 12, 4, 0, 0, Math.PI*2); ctx.fill();

    // corps
    ctx.fillStyle = '#e9e9f0';
    ctx.fillRect(px+6, py+8, 16, 18); // torse
    // tête
    ctx.fillStyle = '#ffd6a5'; ctx.fillRect(px+4, py-4, 20, 16);
    // oeil directionnel
    ctx.fillStyle = '#1b1e28'; ctx.fillRect(px+ (player.dir>0?18:6), py+1, 3, 3);
    // jambes
    ctx.fillStyle = '#90e0ef';
    ctx.fillRect(px+6, py+26, 6, 10 + (player.onGround?leg:0));
    ctx.fillRect(px+16, py+26, 6, 10 - (player.onGround?leg:0));

    ctx.restore();
  }

  // resize letterbox
  function fit(){ const r = 960/540; const w = cvs.parentElement.clientWidth; const h = w/r; cvs.style.height = h+'px'; }
  addEventListener('resize',fit); fit();

  requestAnimationFrame(update);
  </script>
</body>
</html>

